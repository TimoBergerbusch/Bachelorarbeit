\section{Preliminaries}

\subsection{Integer Term Rewrite Systems (int-TRS) }
\frame{\tableofcontents[currentsection]}
\begin{frame}[fragile] %%Eine Folie
	\frametitle{Integer Term Rewrite Systems (int-TRS)}
	\its considered:
	\begin{lstlisting}[escapechar=!]
	!$\overbrace{f_x}^{(1)} \qquad\quad\>\>\>\> \rightarrow \overbrace{f_y}^{(2)} (v_1, \dots v_n) :|: cond_1$!
	!$\>\>f_y(\underbrace{v_1, \dots v_n}_{(3)}) \> \rightarrow \>\> f_y \>\>\>(\underbrace{v^\prime_1,\dots v^\prime_n}_{(3)})  :|: \underbrace{cond_2}_{(4)}$!
	\end{lstlisting}
	
	\begin{enumerate}
		\item[(1)] function symbol (no variables $\Rightarrow$ start)
		\item[(3)] variables $v^\prime_i$ as linear updates of the variables $v_j$
			\item[(2)] function symbol
			\item[(4)] a set of (in)-equations mentioning $v_j$ and $v^\prime_i$
	\end{enumerate}

	Reading: "rewrite $f_y(v_1,\dots,v_n)$ as $f_y(v^\prime_1,\dots,v^\prime_n)$ if \textit{cond} holds"
\end{frame}

\subsection{Geometric Nontermination Argument (GNA)}
\begin{frame}[fragile]
	\frametitle{Geometric Nontermination Argument (GNA)}
	\begin{itemize}
		\item Idea: Split program into two parts:
			\begin{itemize}
				\item \stem: variable initialization and declaration
					\begin{lstlisting}[language = java]
	int a;
	int b=1;
					\end{lstlisting}
				\item \loopt: linear updates and \code{while}-guard
				\begin{lstlisting}[language = java]
	while(a+b>=4){
		a=3*a+b;
		b=2*b-5;
	}
				\end{lstlisting}
			\end{itemize}
		\item apply the definition of a \gna by J. Leike and M. Heizmann 
	\end{itemize}
\end{frame}

\begin{frame}[fragile]
	\begin{example}
		The \its of the example program would be: \newline
		\begin{lstlisting}[linewidth=10.5cm, escapechar = !]
		!$f_1 \qquad\>\>\>\> \rightarrow f_2(1+3*v_1,-3)   :|: v_1>2 \text{ \&\& } 8<3*v_1$!
		!$f_2(v_1,v_2) \rightarrow f_2(3*v_1+v_2,v_3) :|: v_1 + v_2 > 3 \text{ \&\& }$! 
		!$v_1 > 6 \text{ \&\& } 3 * v_1 > 20 \text{ \&\& } 5 + v_3 = 2 * v_2 \text{ \&\& } v_3 < -10 $!
		\end{lstlisting}
		The first rule represents the \stem \newline
		Second rule represents the \loopt
	\end{example}	
\end{frame}

\begin{frame}
	\begin{definition}[Geometric Non Termination Argument]
		\label{def:gna}
		A tuple of the form:
		\vspace{-1em}
		\begin{figure}
			\centering
			$(x, y_1, \dots, y_k, \lambda_1, \dots, \lambda_k, \mu_1, \dots, \mu_{k-1})$
		\end{figure}  
		\vspace{-1em}
		is called a \gna of size $k$ for a program = $(\stem, \loopt)$ with $n$ variables iff all of the following statements hold:
		\begin{itemize}
			\setlength{\itemindent}{1in}
			\item[(domain)] $x, y_1, \dots, y_k \in \mathbb{R}^n$, $\lambda_1, \dots \lambda_k, \mu_1, \dots \mu_{k-1} \ge 0$
			\item[(init)] x represents the \startterm (\stem)
			\item[(point)] $A\begin{pmatrix} x \\ x + \sum_i y_i \end{pmatrix} \le b$
			\item[(ray)] $A\begin{pmatrix} y_i \\ \lambda_i y_i + \mu_{i-1} y_{i-1} \end{pmatrix} \le 0$ for all $1 \le i \le k$
		\end{itemize}
		Note: $y_0 = \mu_0 = 0$ instead of case distinction
	\end{definition}
\end{frame}

\subsection{Definitions}

\begin{frame}
	\frametitle{Definitons: Matrices}
%	For all definitions we take a rule to be specified as $r \Leftrightarrow f_x(v_1,\dots,v_n)\rightarrow f_y(c_1+\sum_{i=1}^{n}g_{1,i}v_i, \dots, c_n+\sum_{i=1}^{n}g_{n,i}v_i) :|: $\newline 
%	\hspace*{1.5cm}$\bigwedge_{\text{guard }g} \sum_{i=1}^{n}g_{n,i}v_i \le c_m$
	\begin{definition}[\guardmatrix, \guardconstants]<1->
		For $1\le i,j\le n$ and $m$ the number of guards not containing "=":\newline
		The \guardmatrix $G\in \mathbb{Z}^{m\times n}$ is the matrix of coefficients $a_{i,j}$ of a variable $v_i$ within the $j$-th guard. The \guardconstants $g \in \mathbb{Z}^{m}$ are the constant terms $c_j$ within the $j$-th guard.
	\end{definition}
	\begin{definition}[\updatematrix, \updateconstants]<2->
		The \updatematrix $U \in \mathbb{Z}^{n \times n}$ and \updateconstants $u \in \mathbb{Z}^n$ are analogously to the \guardmatrix and \guardconstants , considering the updates (right hand side) instead of the guards.
	\end{definition}
\end{frame}

\begin{frame}[fragile]
	\begin{variableblock}{Reminder: \its}{bg=orange!50!white,fg=black}{bg=orange, fg=white}
		\begin{lstlisting}[linewidth=10.5cm, escapechar = !]
		!$f_1 \qquad\>\>\>\> \rightarrow f_2(1+3*v_1,-3)   :|: v_1>2 \text{ \&\& } 8<3*v_1$!
		!$f_2(v_1,v_2) \rightarrow f_2(3*v_1+v_2,v_3) :|: v_1 + v_2 > 3 \text{ \&\& }$! 
		!$v_1 > 6 \text{ \&\& } 3 * v_1 > 20 \text{ \&\& } 5 + v_3 = 2 * v_2 \text{ \&\& } v_3 < -10 $!
		\end{lstlisting}
	\end{variableblock}
	\begin{example}[\guardmatrix, \guardconstants]
		for the stated \its the \guardconstants $G$ and \guardconstants $g$ for the loop are:\newline
		\begin{center}
			\vspace{-2em}
			$G = \begin{pmatrix} -1 & -1 \\ -1 & 0 \\ -3 & 0 \\ 0 & 2 \end{pmatrix}$ and $g= \begin{pmatrix} -4 \\ -7 \\ -21 \\ -6 \end{pmatrix}$
		\end{center}		
	\end{example}
\end{frame}

\begin{frame}[fragile]
	\begin{variableblock}{Reminder: \its}{bg=orange!50!white,fg=black}{bg=orange, fg=white}
		\begin{lstlisting}[linewidth=10.5cm, escapechar = !]
		!$f_1 \qquad\>\>\>\> \rightarrow f_2(1+3*v_1,-3)   :|: v_1>2 \text{ \&\& } 8<3*v_1$!
		!$f_2(v_1,v_2) \rightarrow f_2(3*v_1+v_2,v_3) :|: v_1 + v_2 > 3 \text{ \&\& }$! 
		!$v_1 > 6 \text{ \&\& } 3 * v_1 > 20 \text{ \&\& } 5 + v_3 = 2 * v_2 \text{ \&\& } v_3 < -10 $!
		\end{lstlisting}
	\end{variableblock}
		\begin{example}[\updatematrix, \updateconstants]
			for the stated \its the \updatematrix $U$ and \updateconstants $u$ are:\newline
			\begin{center}
				\vspace{-2em}
				$U = \begin{pmatrix} 3 & 1 \\ 0 & 2 \end{pmatrix}$ and $u = \begin{pmatrix} 0 \\ -5 \end{pmatrix}$
			\end{center}		
		\end{example}
\end{frame}

\begin{frame}
	\begin{definition}[\iterationmatrix, \iterationconstants]<1->
		Let \textbf{0} be a matrix of the size of $G$ with only entry's 0 and $I$ denote the identity matrix having the same dimension as $U$. Then are the \iterationmatrix $A$ and \iterationconstants $b$ defined as:
		\begin{figure}[H]
			\centering
			$A = \begin{pmatrix} G & \textbf{0} \\ U & -I \\ -U & I \end{pmatrix}$ and $b = \begin{pmatrix} g \\ -u \\ u \end{pmatrix}$
		\end{figure}
	\end{definition}
	\begin{variableblock}{Sentence}{bg=blue!10!white,fg=black}{bg=blue, fg=white}<2->
		If a geometric nontermination argument $a$ for a program $p$ exists, then $p$ does
		not terminate.
	\end{variableblock}
\end{frame}

\subsection{Reverse Polish Notation Tree (RPNTree)}

\begin{frame}[fragile]
	\frametitle{\rpntree (RPNTree)}
	\begin{itemize}
		\item<1-> simple tree structure to handle \underline{only} considered terms 
		\item<1-> classes for variables, constants and arith. operations
	\end{itemize}
	
	\newsavebox\testboxEX
	\begin{lrbox}{\testboxEX}
		
		\begin{tikzpicture}[scale=0.6, every node/.style={scale=0.6}]
		\node (Plus) at (0,0) [objDia] {
			\textbf{f1}:RPNFunctionSymbol
			\nodepart{second}arithmeticSymbol: PLUS
		};
		\node (Times1) at (-4, -2 ) [objDia] {
			\textbf{f2}:RPNFunctionSymbol
			\nodepart{second}arithmeticSymbol: TIMES	
		};
		\node (cons1) at (-6, -4) [objDia] {
			\textbf{c1}:RPNConstant
			\nodepart{second}value: 3
		};
		\node (var1) at (-2, -4)[objDia] {
			\textbf{v1}:RPNVariable
			\nodepart{second}varName: $v_1$
		};
		\node (var2) at (4, -2) [objDia] {
			\textbf{v2}:RPNVariable
			\nodepart{second}value: $v_2$
		};
		\draw[thickarrow] (Plus.south)  -- ++(0,-0.4) -| (Times1.north) node [pos = 0.4, above, font=\footnotesize]{left};
		\draw[thickarrow] (Plus.south)  -- ++(0,-0.4) -| (var2.north) node [pos = 0.4, above, font=\footnotesize]{right};
		\draw[thickarrow] (Times1.south)  -- ++(0,-0.5) -| (cons1.north) node [pos = 0.4, above, font=\footnotesize]{left};
		\draw[thickarrow] (Times1.south)  -- ++(0,-0.5) -| (var1.north) node [pos = 0.4, above, font=\footnotesize]{right};
		\end{tikzpicture}
	\end{lrbox}
	\begin{example}
		\centering
		\begin{tikzpicture}[
			scale=0.4,
			every edge/.append style = { dashedarrow },
			every node/.append style = { stdNode, scale = 0.75} ]
			\node (L) {\begin{tabular}{cc} mathematical expression: \\ $3*v_1+v_2$ \end{tabular} };
			\node[below = of L] (M)  {\begin{tabular}{cc} reverse polish notation: \\ $+(*(3, v_1),v_2)$ \end{tabular} };
			\node[right = of M] (R) {\usebox\testboxEX};
			\draw (L.south) edge (M.north);
			\draw (M.east) edge (R.west);
		\end{tikzpicture}
	\end{example}
\end{frame}


\subsection{Sat. Modulo Theorie (SMT)}

\begin{frame}
	\frametitle{Sat. Modulo Theorie (SMT)}
	
	\begin{itemize}
		\item Basic idea: 
			\begin{itemize}
				\item[] set of assertions: (in)-equations with variables
				\item[] \qquad$\>\>$ $\xrightarrow{\text{\solver}}$ a sat. model \underline{or} unsat. core
			\end{itemize}		
		\item \color{blue}sat. model\color{black}: a value for every variable s.t. all assertions hold
		\item \color{blue}unsat. core\color{black}: a (minimal) set of assertions that can't hold simultaneously
	\end{itemize}
	\begin{example}
		Considering the following assertions:
		\vspace*{-1em}
		\begin{figure}[H]
			\centering
			\begin{tabular}{cccc}
				$x \le y$ &	$x > 5 $ &	$ x+ y \le 20$ &$y \neq 10$ \\
			\end{tabular}
		\end{figure}
		\vspace*{-1em}
		 A possible model would be $m_1 = \{x=6, y=6\}$.\newline \newline
		 changing the third assertion to $x+y\le10$:\newline
		 no possible solution with unsat. core $\{x \le y$, $x > 5$, $x+ y \le 10 \}$
	\end{example}
\end{frame}

%\begin{frame}
%	\begin{itemize}
%		\item assertions can be generated using \color{blue}\smtfactory\color{black}
%		\item if generated it ensures the following property:
%		\begin{figure}[H]
%			\centering
%			\begin{tikzpicture}[scale=0.8, every node/.style={scale=0.8}]
%			\node[objDia] (top) {
%				\textbf{f1}: RPNFunctionSymbol
%				\nodepart{second}arithmeticSymbol: $\circ$
%			};
%			\node[rectangle, draw=black, rounded corners, text centered, anchor=north, below left = of top] (left) {
%				$\psi$
%			};
%			\node[objDia, below right = of top] (right) {
%				\textbf{c1}: RPNConstant
%				\nodepart{second}value: $c$
%			};
%			
%			\draw[thickarrow] (top.south)  -- ++(0,-0.5) -| (left.north) node [pos = 0.4, above, font=\footnotesize]{left};
%			\draw[thickarrow] (top.south)  -- ++(0,-0.5) -| (right.north) node [pos = 0.4, above, font=\footnotesize]{right};
%			\end{tikzpicture}
%		\end{figure}
%		where $\circ \in \{\le, = \}$, $cons\in \mathbb{Z}$ and a linear update $\psi= \sum_{i=1}^{n}a_{i,j}v_i$ for variables $v_i$
%	\end{itemize}
%\end{frame}